<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guzzo Clicker</title>
</head>
<!-- importando a fonte -->
<style>
@font-face {
          font-family: 'fonte_epica';
          src: url('FFCommaTrial-Regular.ttf') format('truetype'); 
        }
</style>
<!-- código -->

<body style="text-align: center;">
<style>
    body{background-color: rgb(161, 187, 153);
    }
</style>
<h1 style="position: relative; z-index: 10;">
<style>h1{font-family: 'fonte_epica'}</style>
GUZZO CLICKER!
</h1>

<h2 style="position: relative; z-index: 10;">
0 cutucadas
</h2>
<style>
.botao-imagem {
  background-color: transparent; 
  border: none;
  padding: 0;
  cursor: pointer;
}
.botao-imagem img {
  display: block;
}
.vetor_flutuante{
    position: absolute;
    width: 100px;
    height: auto;
    z-index: 1;
}
</style>
<button id="botao" class="botao-imagem" type="button" onmousedown="efeito()" onmouseup="desfeito()" onclick="clicada()" style="position: relative; z-index: 10;">
    <img id="imagem" src=guzzo_normal-Photoroom.png alt="Guzzo em seu estado normal" width="300px">
</button>

<script>
    var cutucadas = 0;
    var contador_triste = 0;
    let timer;
    
    function VoltaAoNormal(){
        document.getElementById("imagem").src = "guzzo_normal-Photoroom.png"
        document.body.style.backgroundImage = 'none';

    }
    var sem_cutucada = 0;
    function clicada() {
        const total_cutucadas = document.querySelector('h2')
        clearTimeout(timer);
        cutucadas++ 
        total_cutucadas.innerHTML = cutucadas+' cutucadas'
        if (contador_triste == 6){
            modoEMO()
            contador_triste=0;
        }
        else if (Math.random() < 0.5){
            document.getElementById("imagem").src = "guzzo_triste-Photoroom.png"
            document.body.style.backgroundImage = 'none';
            timer = setTimeout(VoltaAoNormal, 1500);
            contador_triste+=1;
        }
        else {
            document.getElementById("imagem").src = "guzzo_bravo-Photoroom.png"
            document.body.style.backgroundImage = 'none';
            timer = setTimeout(VoltaAoNormal, 1500);
            contador_triste=0;
        }
        sem_cutucada=0;
    }

    function modoEMO() {
            document.body.style.backgroundColor = 'black';
            document.body.style.color = 'white';
            const botao = document.getElementById('botao');
            document.getElementById("imagem").src = "guzzo_emo.png"
            botao.disabled = true;
            setTimeout(function() {
                botao.disabled = false;
                document.body.style.color = 'black';
                document.body.style.backgroundColor = 'rgb(161, 187, 153)';
                document.getElementById("imagem").src = "guzzo_normal-Photoroom.png"
            }, 3000);
    }
    function modoFELIZ() {
            document.body.style.backgroundImage = "linear-gradient(to right, red, orange, yellow, green, blue, purple)";
            document.getElementById("imagem").src = "guzzo_feliz.png"
    }
    function cria_vetor(){
        const novoVetor=document.createElement('img');
        novoVetor.src='vetor.png';
        novoVetor.className='vetor_flutuante';
        const imgSize=100;
        const alturamaxima=window.innerHeight-imgSize;
        const larguramaxima=window.innerWidth-imgSize;
        const alturaaleatoria = Math.round(Math.random() * alturamaxima);
        const larguraaleatoria = Math.round(Math.random() * larguramaxima);
        const rotacaoaleatoria = Math.round(Math.random() * 360);

        novoVetor.style.top = alturaaleatoria + 'px';
        novoVetor.style.left = larguraaleatoria + 'px';
        novoVetor.style.transform = 'rotate(' + rotacaoaleatoria + 'deg)';
        document.body.appendChild(novoVetor);
    }


    function efeito(){
        document.getElementById("imagem").style.width = "285px";
    }
    function desfeito(){
        document.getElementById("imagem").style.width = "300px";
    }

    function efeito2(){
        document.getElementById("compra").style.width = "285px";
    }
    function desfeito2(){
        document.getElementById("compra").style.width = "300px";
    }



    var vetores=0;
    function compra(){
        var preco = 10*1.1**vetores
        if (cutucadas<Math.round(preco)){
            alert("Pobre.");
        }
        else{
            vetores+=1;
            const total_cutucadas = document.querySelector('h2');
            total_cutucadas.innerHTML = (cutucadas-Math.round(preco)) + ' cutucadas';
            cutucadas-=Math.round(preco);
            var preco = 10*1.1**vetores;
            cria_vetor();
        }
        const total_vetores = document.querySelector('h3')
        total_vetores.innerHTML = 'Preço: ' + Math.round(preco) + ' cutucadas';
    }
    setInterval(function() {
        if (vetores > 0) {
            cutucadas += vetores;
            const total_cutucadas = document.querySelector('h2');
            total_cutucadas.innerHTML = cutucadas + ' cutucadas';
        }
        sem_cutucada+=1;
        if (sem_cutucada == 30){
        modoFELIZ();
    }
    }, 1000);
</script>
<br>
<br>
<div>
    <button id="botao2" class="botao-imagem" type="button" onclick="compra()" onmousedown="efeito2()" onmouseup="desfeito2()" style="position: relative; z-index: 10;">
    <img id="compra" src=comprar_vetor.png alt="Guzzo em seu estado normal" width="300px">
</button>
</div>
<h3 style="position: relative; z-index: 10; margin-top: 0;">
Preço: 10 cutucadas
</h3>


</body>
</html>
